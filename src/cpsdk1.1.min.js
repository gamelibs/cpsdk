class adSdk{constructor(e){var a;this.config=e,this.adSdk_isReady=!0,window.dataLayer=window.dataLayer||[],this.gameid=new URLSearchParams(document.location.search).get("gameid"),this.pubid=new URLSearchParams(document.location.search).get("pubid"),this.ret=new URLSearchParams(document.location.search).get("ret"),this.is_ad_test="beta"===new URLSearchParams(document.location.search).get("vb"),this.dev_name=new URLSearchParams(document.location.search).get("dev")||this.config.client||"default",this.gamePlayTimer=null,this._insert_tagmanager(),this._eventAds={listeners:{ready:[],beforeAd:[],afterAd:[],adDismissed:[],adViewed:[],error:[],interstitial:[],reward:[]},on(e,a){this.listeners[e]&&this.listeners[e].push(a)},emit(e,...a){this.listeners[e]&&this.listeners[e].forEach((e=>{e(...a)}))},off(e,a){this.listeners[e]&&(this.listeners[e]=this.listeners[e].filter((e=>e!==a)))}},this.is_adsense=null,this.is_gpt=!1,this.is_ima=!1,this.ads_code=null,this.gpt_code=null,this.ima_code=null,this.adType=null,this.adx_type=null,this.gpt_type=null,this.adsense_type=null,this.is_first=!0,this.interstitial_requests_count=0,this.interstitial_req_frequency=!1,this.interstitial_time_start=0,this.reward_requests_count=3,this.reward_time_start=0,this.reward_req_frequency=!1,this.req_ad_stabilization=!1,this.req_ad_timeout=!0,this.interstitialAd=this._showInterstitialAd,this.rewardAd=this._showRewardAd,this.adContainer=null,this.videoContent=null,this.adsLoader=null,this.adsManager=null,this.adDisplayContainer=null,this.videoWidth=null,this.videoHeight=null,this.adsRequest=null,this.adx_isLoaded=!1,this.adxLoadTimeout=null,this.adx_callback={error:()=>{},beforeAd:()=>{},afterAd:()=>{},adViewed:()=>{},adDismissed:()=>{}},this.gpt_callback={error:()=>{},beforeAd:()=>{},afterAd:()=>{},adViewed:()=>{},adDismissed:()=>{}},this.adsense_callback={error:()=>{},beforeAd:()=>{},afterAd:()=>{},adViewed:()=>{},adDismissed:()=>{}},this.adsType={ADSENSE:"adsense",IMA:"ima",GPT:"gpt"},this._eventAds.on("ready",((e,a)=>{this.__sdklog(e,a)})),this._eventAds.on("interstitial",(e=>{window.gtag("event","game_interstitialad",{send:"sdk",ad_type:this.adType}),this.__sdklog(e,this.adType)})),this._eventAds.on("reward",(e=>{window.gtag("event","game_reward",{send:"sdk",ad_type:this.adType}),this.__sdklog(e,this.adType)})),this._eventAds.on("beforeAd",((e,a)=>{"rewardedAd"===this.adx_type||"rewardedAd"===this.gpt_type||"rewardedAd"===e?window.gtag("event","game_reward_open",{send:"sdk",ad_type:this.adType}):window.gtag("event","game_interstitialad_open",{send:"sdk",ad_type:this.adType}),this.__sdklog2("*******adevent**********",e,a,this.adType)})),this._eventAds.on("adDismissed",(e=>{window.gtag("event","game_reward_dismissed",{send:"sdk",ad_type:this.adType}),this.__sdklog2("*******adevent**********",e,this.adType)})),this._eventAds.on("adViewed",(e=>{window.gtag("event","game_reward_viewed",{send:"sdk",ad_type:this.adType}),this.__sdklog2("*******adevent**********",e,this.adType)})),this._eventAds.on("afterAd",((e,a)=>{window.gtag("event","game_interstitialad_viewed",{send:"sdk",ad_type:this.adType}),this.__sdklog2("*******adevent**********",e,a,this.adType)})),this._eventAds.on("error",((e,a)=>{switch(a){case"timeout":case"error":case"frequencyCapped":case"notReady":case"invalid":case"noAdPreloaded":case"frequencyrewardAd":case"frequencyinterstitialAd":case"other":default:window.gtag("event","ad_error",{ad_error_type:a,send:"sdk",ad_type:this.adType});case"viewed":case"dismissed":}"viewed"!==a&&"dismissed"!==a&&this.__sdklog2("*******adevent**********",e,a,this.adType)})),this._initAds(),(a="https://www.cpsense.com/public/sdk_rank.js",new Promise(((e,t)=>{const d=document.createElement("script");d.src=a,d.onload=e,d.onerror=t,document.head.appendChild(d)}))).then((e=>{const a=this.gameid,t=this.pubid;a&&t?this._ajax("https://api.douyougame.com/interest/ranking/"+a+"/"+t,"GET","").then((e=>{"function"==typeof break_abc&&break_abc(e)})).catch((e=>{console.log("Error fetching data:",e),"function"==typeof break_abc&&break_abc({data:[],link:"https://www.likebox.top"})})):"function"==typeof break_abc&&break_abc({data:[],link:"https://www.likebox.top"})})).catch((e=>{console.log("break load",e)}))}_initAds(){let e=ads_list[this.pubid+"-"+this.dev_name]||ads_list[this.dev_name]||ads_list.default_ads;if(e){if(e.startsWith("data-ad-client"))return this.adType=this.adsType.ADSENSE,this.is_adsense=!0,this.ads_code=e,void this._openAdsense();if(e.startsWith("https://pubads.g.doubleclick.net/gampad/ads?iu="))return this.adType=this.adsType.IMA,this.is_gpt=!0,this.ima_code=e,void this._openIma();if(/^\/\d[^\/]*\//.test(e))return this.adType=this.adsType.GPT,this.gpt_code=e,void this._openGPT();this._openIma(vast_url)}}_timeoutTimer_load=null;_openAdsense(){const e=document.createElement("script");if(e.async=!0,e.setAttribute("data-ad-frequency-hint","30s"),e.src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js",e.setAttribute("crossorigin","anonymous"),this.is_ad_test&&e.setAttribute("data-adbreak-test","on"),this.ads_code&&"string"==typeof this.ads_code){let a=this.ads_code.split(",");for(let t=0;t<a.length;t++){let d=a[t].split("=");2===d.length&&e.setAttribute(d[0],d[1])}}e.onload=()=>{window.adsbygoogle=window.adsbygoogle||[],window.adBreak=window.adConfig=function(e){window.adsbygoogle.push(e)};let e=!1;window.adConfig({preloadAdBreaks:"on",sound:"on",onReady:()=>{e=!0,this.adSdk_isReady=!0,this._eventAds.emit("ready","adSdk_isReady:true","s")}}),this._timeoutTimer_load=setTimeout((()=>{clearTimeout(this._timeoutTimer_load),e||this._eventAds.emit("error","timeout","notReady-adsense")}),1e4)},e.onerror=e=>{this._eventAds.emit("error","error","not-loaded-adsense"),this.__sdklog("adsense loadError:",e)},document.head.appendChild(e)}_openIma(e){let a=document.createElement("script");a.type="text/javascript",a.src="//imasdk.googleapis.com/js/sdkloader/ima3.js",document.head.appendChild(a),a.onload=()=>{this.adSdk_isReady=!0,this._eventAds.emit("ready","adSdk_isReady:true","x")},a.onerror=()=>{this._eventAds.emit("error","error","not-loaded-adx"),this.__sdklog("adx load error")}}_openGPT(){let e=document.createElement("script");e.type="text/javascript",e.async=!0,e.crossOrigin="anonymous",e.src="//securepubads.g.doubleclick.net/tag/js/gpt.js",document.head.appendChild(e),e.onload=()=>{let e=this;e.adSdk_isReady=!0,e._eventAds.emit("ready","gptSdk_isReady:true","gpt"),window.googletag=window.googletag||{cmd:[]},e.rewardPayload=null,window.googletag.cmd.push((()=>{window.googletag.pubads().addEventListener("rewardedSlotReady",(a=>{e.req_ad_timeout=!1,e.gptBackupTimeout&&(clearTimeout(e.gptBackupTimeout),e.gptBackupTimeout=null);try{a&&"function"==typeof a.makeRewardedVisible&&a.makeRewardedVisible()}catch(e){console.log("event.makeRewardedVisible err",e)}e._eventAds.emit("beforeAd","beforeAd","pause"),e.gpt_callback&&"function"==typeof e.gpt_callback.beforeAd&&e.gpt_callback.beforeAd()})),window.googletag.pubads().addEventListener("rewardedSlotClosed",(()=>{e.rewardPayload?("rewardedAd"===e.gpt_type?(e._eventAds.emit("adViewed","adViewed","completed"),e.gpt_callback&&"function"==typeof e.gpt_callback.adViewed&&e.gpt_callback.adViewed()):(e._eventAds.emit("afterAd","afterAd","resume"),e.gpt_callback&&"function"==typeof e.gpt_callback.afterAd&&e.gpt_callback.afterAd()),e.rewardPayload=null):"rewardedAd"===e.gpt_type?(e._eventAds.emit("adDismissed","adDismissed","skipped"),e.gpt_callback&&"function"==typeof e.gpt_callback.adDismissed&&e.gpt_callback.adDismissed()):(e._eventAds.emit("afterAd","afterAd","resume"),e.gpt_callback&&"function"==typeof e.gpt_callback.afterAd&&e.gpt_callback.afterAd()),e.rewardedSlot&&(window.googletag.destroySlots([e.rewardedSlot]),e.rewardedSlot=null)})),window.googletag.pubads().addEventListener("rewardedSlotGranted",(a=>{try{e.rewardPayload=a&&a.payload?a.payload:null}catch(a){e.rewardPayload=null}})),window.googletag.pubads().addEventListener("slotRenderEnded",(a=>{try{a&&a.slot===e.rewardedSlot&&(e.gptBackupTimeout&&(clearTimeout(e.gptBackupTimeout),e.gptBackupTimeout=null),a.isEmpty&&(e.req_ad_timeout=!1,e._eventAds.emit("error","error","No ad returned for rewarded ad slot."),e.gpt_callback&&"function"==typeof e.gpt_callback.error&&e.gpt_callback.error("No ad returned for rewarded ad slot.")))}catch(e){console.log("event.isEmpty err",e)}})),window.googletag.enableServices()}))},e.onerror=()=>{this._eventAds.emit("error","error","not-loaded-gpt"),this.__sdklog("gpt load error")}}_isAdxDom=!1;_createAdxDom(){console.log("ADX _createAdxDom called, creating container");document.body.insertAdjacentHTML("beforeend",'\n        <style id="adx-style">\n            #adx-mainContainer {\n                all: initial; /* 重置样式，避免被父级影响 */\n                position: fixed !important;\n                top: 0 !important;\n                left: 0 !important;\n                width: 100vw !important;\n                height: 100vh !important;\n                display: flex !important;\n                justify-content: center !important;\n                align-items: center !important;\n                background-color: rgba(0,0,0,0.8) !important;\n                z-index: 2147483647 !important; /* 最大安全值 */\n                pointer-events: auto !important;\n            }\n            #adx-adContainer {\n                width: 100% !important;\n                height: 100% !important;\n                display: flex !important;\n                justify-content: center !important;\n                align-items: center !important;\n            }\n            #adx-contentElement {\n                width: 90vw !important;\n                max-width: 1280px !important;\n                aspect-ratio: 16 / 9 !important;\n                height: auto !important;\n            }\n        </style>\n        <div id="adx-mainContainer">\n            <div id="adx-adContainer">\n                <video id="adx-contentElement" playsinline></video>\n            </div>\n        </div>\n    '),this._isAdxDom=!0}_destroyAdxDom(){console.log("ADX _destroyAdxDom called");const e=document.getElementById("adx-mainContainer");e?(console.log("Removing ADX main container"),e.remove()):console.log("ADX main container not found");const a=document.getElementById("adx-style");a?(console.log("Removing ADX style tag"),a.remove()):console.log("ADX style tag not found"),this.adContainer=null,this.videoContent=null,this._isAdxDom=!1}_onAdsManagerLoaded(e){let a=this;a.adxLoadTimeout&&(clearTimeout(a.adxLoadTimeout),a.adxLoadTimeout=null);const t=new google.ima.AdsRenderingSettings;t.useCustomPlaybackUI=!1;try{if(!e||"function"!=typeof e.getAdsManager)throw new Error("Invalid adsManagerLoadedEvent");a.adsManager=e.getAdsManager(a.videoContent,t)}catch(e){return a.req_ad_timeout=!1,a._destroyAdxDom(),a._eventAds.emit("error","error","notReady"),void(a.adx_callback&&"function"==typeof a.adx_callback.error&&a.adx_callback.error("notReady"))}try{a.adsManager.init(a.videoWidth,a.videoHeight,google.ima.ViewMode.NORMAL),a.adsManager.start()}catch(e){return a.req_ad_timeout=!1,a._destroyAdxDom(),a._eventAds.emit("error","error","notReady"),void(a.adx_callback&&"function"==typeof a.adx_callback.error&&a.adx_callback.error("notReady"))}let d=!1;a.adContainer.addEventListener("click",(()=>{a.adsManager&&(d?a.adsManager.resume():a.adsManager.pause(),d=!d)})),a.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,(()=>{a.req_ad_timeout=!1,a.adxLoadTimeout&&(clearTimeout(a.adxLoadTimeout),a.adxLoadTimeout=null),a._eventAds.emit("beforeAd","beforeAd","pause"),a.adx_callback&&"function"==typeof a.adx_callback.beforeAd&&a.adx_callback.beforeAd()})),a.adsManager.addEventListener(google.ima.AdEvent.Type.COMPLETE,(()=>{a.req_ad_timeout=!1,a._destroyAdxDom(),"rewardedAd"===a.adx_type?(a._eventAds.emit("adViewed","adViewed","completed"),a.adx_callback&&"function"==typeof a.adx_callback.adViewed&&a.adx_callback.adViewed()):(a._eventAds.emit("afterAd","afterAd","completed"),a.adx_callback&&"function"==typeof a.adx_callback.afterAd&&a.adx_callback.afterAd())})),a.adsManager.addEventListener(google.ima.AdEvent.Type.SKIPPED,(()=>{a.req_ad_timeout=!1,a._destroyAdxDom(),"rewardedAd"===a.adx_type?(a._eventAds.emit("adDismissed","adDismissed","skipped"),a.adx_callback&&"function"==typeof a.adx_callback.adDismissed&&a.adx_callback.adDismissed()):(a._eventAds.emit("afterAd","afterAd","skipped"),a.adx_callback&&"function"==typeof a.adx_callback.afterAd&&a.adx_callback.afterAd())})),a.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,(()=>{a.req_ad_timeout=!1,a._destroyAdxDom(),"rewardedAd"!==a.adx_type&&(a._eventAds.emit("afterAd","afterAd","resume"),a.adx_callback&&"function"==typeof a.adx_callback.afterAd&&a.adx_callback.afterAd())})),a.adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,(e=>{a.req_ad_timeout=!1,a._destroyAdxDom();let t=null,d="unknown",r="Unknown error";try{e&&"function"==typeof e.getError&&(t=e.getError(),t&&t.data&&(d=t.data.type||"unknown",r=t.data.errorMessage||"Unknown error"))}catch(e){console.log("adx IMA err:",e)}a._eventAds.emit("error",d,r),a.adx_callback&&"function"==typeof a.adx_callback.error&&a.adx_callback.error(d)}))}_onAdError(e){console.log("ADX _onAdError called, destroying container"),this._destroyAdxDom(),this.req_ad_timeout=!1,this.adxLoadTimeout&&(clearTimeout(this.adxLoadTimeout),this.adxLoadTimeout=null);let a=null,t="unknown",d="Unknown error";try{e&&"function"==typeof e.getError&&(a=e.getError(),a&&a.data&&(t=a.data.type||"unknown",d=a.data.errorMessage||"Unknown error"))}catch(e){console.log("adx IMA err:",e)}this._eventAds.emit("error",t,d),this.adx_callback&&"function"==typeof this.adx_callback.error&&this.adx_callback.error(t)}_showAdx(){let e=this;if("undefined"==typeof google||void 0===google.ima)return e.req_ad_timeout=!1,e._eventAds.emit("error","error","notReady"),void(e.adx_callback&&"function"==typeof e.adx_callback.error&&e.adx_callback.error("notReady"));if(e.adsManager&&(e.adsManager.destroy(),e.adsManager=null),e.adsLoader&&(e.adsLoader.destroy(),e.adsLoader=null),e._isAdxDom||e._createAdxDom(),e.adContainer=document.getElementById("adx-adContainer"),e.videoContent=document.getElementById("adx-contentElement"),!e.adContainer||!e.videoContent)return e.req_ad_timeout=!1,e._destroyAdxDom(),e._eventAds.emit("error","error","notReady"),void(e.adx_callback&&"function"==typeof e.adx_callback.error&&e.adx_callback.error("notReady"));e.adxLoadTimeout=setTimeout((()=>{e.req_ad_timeout&&(console.log("ADX ad loading timeout, destroying container"),e.req_ad_timeout=!1,e._destroyAdxDom(),e._eventAds.emit("error","error","timeout"),e.adx_callback&&"function"==typeof e.adx_callback.error&&e.adx_callback.error("timeout"))}),1e4);try{e.adDisplayContainer=new google.ima.AdDisplayContainer(e.adContainer,e.videoContent),e.adsLoader=new google.ima.AdsLoader(e.adDisplayContainer),e.adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,(a=>e._onAdsManagerLoaded(a)),!1),e.adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,(a=>e._onAdError(a)),!1),e.videoWidth=document.documentElement.clientWidth||window.innerWidth,e.videoHeight=document.documentElement.clientHeight||window.innerHeight,e.adDisplayContainer.initialize();const a=new google.ima.AdsRequest;a.adTagUrl=e.is_ad_test?e._getTestAdxUrl("Preroll"):e.ima_code+e._generateUniqueCorrelator(),a.linearAdSlotWidth=e.videoWidth,a.linearAdSlotHeight=e.videoHeight,e.adsLoader.requestAds(a)}catch(a){console.log("ADX initialization error:",a),e.req_ad_timeout=!1,e._destroyAdxDom(),e.adxLoadTimeout&&(clearTimeout(e.adxLoadTimeout),e.adxLoadTimeout=null),e._eventAds.emit("error","error","initError"),e.adx_callback&&"function"==typeof e.adx_callback.error&&e.adx_callback.error("initError")}}gptBackupTimeout=null;_showGPT(){let e=this;if(void 0===window.googletag||!window.googletag.cmd)return e.req_ad_timeout=!1,e._eventAds.emit("error","error","notReady"),void(e.gpt_callback&&"function"==typeof e.gpt_callback.error&&e.gpt_callback.error("notReady"));let a=e.is_ad_test?e._getTestAdxUrl("gpt"):e.gpt_code;e.gptBackupTimeout=setTimeout((()=>{e.req_ad_timeout&&(e.req_ad_timeout=!1,e._eventAds.emit("error","error","gpt_no_response"),e.gpt_callback&&"function"==typeof e.gpt_callback.error&&e.gpt_callback.error("gpt_no_response"))}),3e4),window.googletag.cmd.push((()=>{e.rewardedSlot=window.googletag.defineOutOfPageSlot(a,window.googletag.enums.OutOfPageFormat.REWARDED),e.rewardedSlot?(e.rewardedSlot.addService(window.googletag.pubads()),window.googletag.display(e.rewardedSlot)):(e.gptBackupTimeout&&(clearTimeout(e.gptBackupTimeout),e.gptBackupTimeout=null),e.req_ad_timeout=!1,e._eventAds.emit("error","error","create_slot_failed"),e.gpt_callback&&"function"==typeof e.gpt_callback.error&&e.gpt_callback.error("create_slot_failed"))}))}_showAdsense(){let e=this;if("function"!=typeof window.adBreak)return e.req_ad_timeout=!1,"function"==typeof e.adsense_callback.error&&e.adsense_callback.error("notReady-adsense"),void e._eventAds.emit("error","error","notReady-adsense");"rewardedAd"===e.adsense_type?window.adBreak({type:"reward",beforeAd(){e.req_ad_timeout=!1,e._eventAds.emit("beforeAd","rewardedAd","beforeAd"),"function"==typeof e.adsense_callback.beforeAd&&e.adsense_callback.beforeAd()},beforeReward(e){e()},adDismissed(){e._eventAds.emit("adDismissed","adDismissed"),"function"==typeof e.adsense_callback.adDismissed&&e.adsense_callback.adDismissed()},adViewed(){e._eventAds.emit("adViewed","adViewed"),"function"==typeof e.adsense_callback.adViewed&&e.adsense_callback.adViewed()},adBreakDone(a){e.req_ad_timeout=!1;let t=a&&a.breakStatus?a.breakStatus:"unknown";e._eventAds.emit("error","reward_error",t),"viewed"!==t&&"function"==typeof e.adsense_callback.error&&e.adsense_callback.error(t)}}):e.is_first?window.adBreak({type:"preroll",beforeAd(){e.req_ad_timeout=!1,e._eventAds.emit("beforeAd","interstitialAd","beforeAd"),"function"==typeof e.adsense_callback.beforeAd&&e.adsense_callback.beforeAd()},adBreakDone(a){e.is_first=!1,e.req_ad_timeout=!1;let t=a&&a.breakStatus?a.breakStatus:"unknown";e._eventAds.emit("error","interstitial_error",t),"viewed"!==t?"function"==typeof e.adsense_callback.error&&e.adsense_callback.error(t):(e._eventAds.emit("afterAd","interstitialAd","afterAd"),"function"==typeof e.adsense_callback.afterAd&&e.adsense_callback.afterAd())}}):window.adBreak({type:["start","pause","next","browse"][Math.floor(4*Math.random())],beforeAd(){e.req_ad_timeout=!1,e._eventAds.emit("beforeAd","interstitialAd","beforeAd"),"function"==typeof e.adsense_callback.beforeAd&&e.adsense_callback.beforeAd()},afterAd(){e._eventAds.emit("afterAd","interstitialAd","afterAd"),"function"==typeof e.adsense_callback.afterAd&&e.adsense_callback.afterAd()},adBreakDone(a){e.is_first=!1,e.req_ad_timeout=!1;let t=a&&a.breakStatus?a.breakStatus:"unknown";e._eventAds.emit("error","interstitial_error",t),"viewed"!==t&&"function"==typeof e.adsense_callback.error&&e.adsense_callback.error(t)}})}_debounceTimer=null;_timeoutTimer=null;_showInterstitialAd(e){let a=this;if(a.req_ad_stabilization)return void("function"==typeof e.error&&e.error("frequencyCapped"));a._debounceTimer=setTimeout((()=>{clearTimeout(a._debounceTimer),a.req_ad_stabilization=!1}),1e3),a.req_ad_stabilization=!0,a._eventAds.emit("interstitial","interstitialAd"),a._timeoutTimer=setTimeout((()=>{clearTimeout(a._timeoutTimer),a.req_ad_timeout&&(a.is_first=!1,a._eventAds.emit("error","error","timeout"),"function"==typeof e.error&&e.error("timeout"))}),8e3);let t=Date.now();a.interstitial_time_start||(a.interstitial_time_start=t);let d=t-a.interstitial_time_start;if(a.interstitial_requests_count>1){if(!(d>3e4))return"function"==typeof e.error&&e.error({ad_error_type:"frequencyinterstitialAd"}),a._eventAds.emit("error","frequencyinterstitialAd","frequencyinterstitialAd"),!1;a.interstitial_time_start=t}a.interstitial_requests_count++,a.req_ad_timeout=!0,a.adType===a.adsType.ADSENSE?(a.adsense_type="interstitialAd",Object.assign(a.adsense_callback,{error:e&&e.error||(()=>{}),beforeAd:e&&e.beforeAd||(()=>{}),afterAd:e&&e.afterAd||(()=>{}),adViewed:e&&e.adViewed||(()=>{}),adDismissed:e&&e.adDismissed||(()=>{})}),a._showAdsense()):a.adType===a.adsType.IMA?(a.adx_type="interstitialAd",Object.assign(a.adx_callback,{error:e&&e.error||(()=>{}),beforeAd:e&&e.beforeAd||(()=>{}),afterAd:e&&e.afterAd||(()=>{}),adViewed:e&&e.adViewed||(()=>{}),adDismissed:e&&e.adDismissed||(()=>{})}),a._showAdx()):a.adType===a.adsType.GPT&&(a.gpt_type="interstitialAd",Object.assign(a.gpt_callback,{error:e&&e.error||(()=>{}),beforeAd:e&&e.beforeAd||(()=>{}),afterAd:e&&e.afterAd||(()=>{}),adViewed:e&&e.adViewed||(()=>{}),adDismissed:e&&e.adDismissed||(()=>{})}),a._showGPT())}_debounceTimer_reward=null;_timeoutTimer_reward=null;_showRewardAd(e){let a=this;if(a.req_ad_stabilization)return void("function"==typeof e.error&&e.error("frequencyCapped"));a._debounceTimer_reward=setTimeout((()=>{clearTimeout(a._debounceTimer_reward),a.req_ad_stabilization=!1}),1e3),a.req_ad_stabilization=!0,a._eventAds.emit("reward","rewardAd"),a._timeoutTimer_reward=setTimeout((()=>{clearTimeout(a._timeoutTimer_reward),a.req_ad_timeout&&(a._eventAds.emit("error","error","timeout"),"function"==typeof e.error&&e.error("timeout"))}),8e3);const t=Date.now();if(a.reward_time_start||(a.reward_time_start=t),t-a.reward_time_start>3e4&&(a.reward_time_start=0,a.reward_requests_count=3),a.reward_requests_count<=0)return"function"==typeof e.error&&e.error({ad_error_type:"frequencyrewardAd"}),a._eventAds.emit("error","frequencyrewardAd","frequencyrewardAd"),!1;a.reward_requests_count--,a.req_ad_timeout=!0,a.adType===a.adsType.ADSENSE?(a.adsense_type="rewardedAd",Object.assign(a.adsense_callback,{error:e&&e.error||(()=>{}),beforeAd:e&&e.beforeAd||(()=>{}),afterAd:e&&e.afterAd||(()=>{}),adViewed:e&&e.adViewed||(()=>{}),adDismissed:e&&e.adDismissed||(()=>{})}),a._showAdsense()):a.adType===a.adsType.IMA?(a.adx_type="rewardedAd",Object.assign(a.adx_callback,{error:e&&e.error||(()=>{}),beforeAd:e&&e.beforeAd||(()=>{}),afterAd:e&&e.afterAd||(()=>{}),adViewed:e&&e.adViewed||(()=>{}),adDismissed:e&&e.adDismissed||(()=>{})}),a._showAdx()):a.adType===a.adsType.GPT&&(a.gpt_type="rewardedAd",Object.assign(a.gpt_callback,{error:e&&e.error||(()=>{}),beforeAd:e&&e.beforeAd||(()=>{}),afterAd:e&&e.afterAd||(()=>{}),adViewed:e&&e.adViewed||(()=>{}),adDismissed:e&&e.adDismissed||(()=>{})}),a._showGPT())}__sdklog(...e){const a=e.map((e=>"string"==typeof e?`'${e}'`:"object"==typeof e?JSON.stringify(e):String(e))).join(" ");console.log(`%c ***CPSDK***: ${a}`,"background-color: #f9f9f9; border: 2px solid #8e44ad; color: #333; padding: 5px 15px; border-radius: 5px; font-weight: 500; box-shadow: 0 0 5px rgba(142, 68, 173, 0.3);")}__sdklog2(...e){const a=e.map((e=>"string"==typeof e?`'${e}'`:"object"==typeof e?JSON.stringify(e):String(e))).join(" ");console.log(`%c ***CPSDK***: ${a}`,"background: linear-gradient(to right, #8e44ad, #ba43ff); color: white; padding: 5px 15px; border-radius: 5px; font-weight: bold; text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);")}__sdklog3(...e){const a=e.map((e=>"string"==typeof e?`'${e}'`:"object"==typeof e?JSON.stringify(e):String(e))).join(" ");console.log(`%c ***DOTGTAG***: ${a}`,"background: linear-gradient(to right,rgb(68, 173, 166),rgb(4, 170, 173)); color: white; padding: 5px 15px; border-radius: 5px; font-weight: bold; text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);")}_insert_tagmanager(){let e=this;const a=document.createElement("script");a.async=!0,a.src="https://www.googletagmanager.com/gtag/js?id=G-NL2943ZRFH",a.setAttribute("crossorigin","anonymous"),a.onload=()=>{window.gtag("consent","default",{ad_storage:"granted",ad_user_data:"granted",ad_personalization:"granted",analytics_storage:"granted"}),window.gtag("js",new Date),window.gtag("set","cookie_flags","SameSite=None;Secure"),window.gtag("config","G-NL2943ZRFH",{game_id:e.gameid,dev_name:e.dev_name})};let t=!1;window.gtag=function(){let a=[...arguments],d=a[1],r=a[2];if(-1!==["set","js","config","consent"].indexOf(a[0])||-1!==["game_start","level_start","level_end"].indexOf(d)||-1!==["ad_error","game_reward_open","game_interstitialad_open","game_play_time","game_reward_dismissed","game_interstitialad","game_reward","game_reward_viewed","game_interstitialad_viewed"].indexOf(d)&&r&&r.send&&"sdk"===r.send){e.__sdklog3(arguments);try{window.dataLayer&&"function"==typeof window.dataLayer.push&&window.dataLayer.push(arguments)}catch(e){console.log("dataLayer:",e)}}"game_start"!==a[1]||t||(t=!0,setInterval((function(){"function"==typeof window.gtag&&window.gtag("event","game_play_time",{send:"sdk"})}),3e4))},document.head.appendChild(a)}_getTestAdxUrl(e){const a=backup_beta_urls[e];return console.log("testURL:",a),a}_generateUniqueCorrelator(){return Date.now()}_ajax(e,a,t){return new Promise((function(d,r){try{let i=new XMLHttpRequest;i.open(a,e,!0),i.responseType="json",i.setRequestHeader("Accept","application/json"),i.onreadystatechange=function(){4===i.readyState&&(200===i.status?d(i.response):r(i.statusText))},"GET"===a?i.send():i.send(JSON.stringify(t))}catch(e){r(e)}}))}}const backup_beta_urls={Inline:"https://pubads.g.doubleclick.net/gampad/ads?iu=/21775744923/external/single_ad_samples&sz=640x480&cust_params=sample_ct%3Dlinear&ciu_szs=300x250%2C728x90&gdfp_req=1&output=vast&unviewed_position_start=1&env=vp&impl=s&correlator=",Preroll:"https://pubads.g.doubleclick.net/gampad/ads?iu=/21775744923/external/single_preroll_skippable&sz=640x480&ciu_szs=300x250%2C728x90&gdfp_req=1&output=vast&unviewed_position_start=1&env=vp&impl=s&correlator=",VMAP:"https://pubads.g.doubleclick.net/gampad/ads?iu=/21775744923/external/vmap_ad_samples&sz=640x480&cust_params=sample_ar=premidpost&ciu_szs=300x250&gdfp_req=1&ad_rule=1&output=vmap&unviewed_position_start=1&env=vp&impl=s&adtest=on&ad_type=video&correlator=",gpt:"/22639388115/rewarded_web_example"},vast_url="https://pubads.g.doubleclick.net/gampad/ads?iu=/22149012983/h5-bwg-vast/400x300-1180marketjs-id00032-bwg&description_url=https%3A%2F%2Fwww.likebox.xyz&tfcd=0&npa=0&sz=400x300&gdfp_req=1&output=vast&unviewed_position_start=1&env=vp&impl=s&correlator=",ads_list={"495-marketjs":"data-ad-client=ca-pub-2252168419307880","495-behappy":"data-ad-client=ca-pub-2252168419307880","495-91games":"data-ad-client=ca-pub-2252168419307880","495-cpsense":"data-ad-client=ca-pub-2252168419307880","316-cpsense":"https://pubads.g.doubleclick.net/gampad/ads?iu=/22846978691/h5-bwg-vast/400x300-4174cpsense-id00316-bwg&description_url=https%3A%2F%2Fwww.bestbox.top&tfcd=0&npa=0&sz=400x300%7C640x480&gdfp_req=1&output=vast&unviewed_position_start=1&env=vp&impl=s&correlator=","316-marketjs":"https://pubads.g.doubleclick.net/gampad/ads?iu=/22846978691/h5-bwg-vast/400x300-4174cpsense-id00316-bwg&description_url=https%3A%2F%2Fwww.bestbox.top&tfcd=0&npa=0&sz=400x300%7C640x480&gdfp_req=1&output=vast&unviewed_position_start=1&env=vp&impl=s&correlator=","316-91games":"https://pubads.g.doubleclick.net/gampad/ads?iu=/22846978691/h5-bwg-vast/400x300-4174cpsense-id00316-bwg&description_url=https%3A%2F%2Fwww.bestbox.top&tfcd=0&npa=0&sz=400x300%7C640x480&gdfp_req=1&output=vast&unviewed_position_start=1&env=vp&impl=s&correlator=","316-behappy":"https://pubads.g.doubleclick.net/gampad/ads?iu=/22846978691/h5-bwg-vast/400x300-4174cpsense-id00316-bwg&description_url=https%3A%2F%2Fwww.bestbox.top&tfcd=0&npa=0&sz=400x300%7C640x480&gdfp_req=1&output=vast&unviewed_position_start=1&env=vp&impl=s&correlator=","487-behappy":"data-ad-client=ca-pub-5985150674191762","487-91games":"data-ad-client=ca-pub-5985150674191762","487-marketjs":"data-ad-client=ca-pub-5985150674191762","487-cpsense":"data-ad-client=ca-pub-5985150674191762","464-behappy":"data-ad-client=ca-pub-5985150674191762","464-91games":"data-ad-client=ca-pub-5985150674191762","464-marketjs":"data-ad-client=ca-pub-5985150674191762","464-cpsense":"data-ad-client=ca-pub-5985150674191762","604-behappy":"data-ad-client=ca-pub-5985150674191762","604-91games":"data-ad-client=ca-pub-5985150674191762","604-cpsense":"data-ad-client=ca-pub-5985150674191762","604-marketjs":"data-ad-client=ca-pub-5985150674191762","230-marketjs":"data-ad-client=ca-pub-5985150674191762","230-behappy":"data-ad-client=ca-pub-5985150674191762","230-cpsense":"data-ad-client=ca-pub-5985150674191762","230-91games":"data-ad-client=ca-pub-5985150674191762","603-behappy":"data-ad-client=ca-pub-5985150674191762","603-91games":"data-ad-client=ca-pub-5985150674191762","603-marketjs":"data-ad-client=ca-pub-5985150674191762","603-cpsense":"data-ad-client=ca-pub-5985150674191762","330-behappy":"data-ad-client=ca-pub-5985150674191762","330-91games":"data-ad-client=ca-pub-5985150674191762","330-marketjs":"data-ad-client=ca-pub-5985150674191762","330-cpsense":"data-ad-client=ca-pub-5985150674191762","1585-marketjs":"data-ad-client=ca-pub-5985150674191762","1585-behappy":"data-ad-client=ca-pub-5985150674191762","1585-91games":"data-ad-client=ca-pub-5985150674191762","1585-cpsense":"data-ad-client=ca-pub-5985150674191762","397-behappy":"data-ad-client=ca-pub-5985150674191762","397-91games":"data-ad-client=ca-pub-5985150674191762","397-marketjs":"data-ad-client=ca-pub-5985150674191762","397-cpsense":"data-ad-client=ca-pub-5985150674191762","415-behappy":"data-ad-client=ca-pub-5985150674191762","415-91games":"data-ad-client=ca-pub-5985150674191762","415-marketjs":"data-ad-client=ca-pub-5985150674191762","415-cpsense":"data-ad-client=ca-pub-5985150674191762","323-behappy":"data-ad-client=ca-pub-5985150674191762","323-91games":"data-ad-client=ca-pub-5985150674191762","323-marketjs":"data-ad-client=ca-pub-5985150674191762","323-cpsense":"data-ad-client=ca-pub-5985150674191762","1696-marketjs":"data-ad-client=ca-pub-5985150674191762","1696-behappy":"data-ad-client=ca-pub-5985150674191762","1696-91games":"data-ad-client=ca-pub-5985150674191762","1696-cpsense":"data-ad-client=ca-pub-5985150674191762","831-behappy":"data-ad-client=ca-pub-9717542802261829","831-91games":"data-ad-client=ca-pub-9717542802261829","831-marketjs":"data-ad-client=ca-pub-9717542802261829","831-cpsense":"data-ad-client=ca-pub-9717542802261829","1349-marketjs":"data-ad-client=ca-pub-9717542802261829","1349-behappy":"data-ad-client=ca-pub-9717542802261829","1349-91games":"data-ad-client=ca-pub-9717542802261829","1349-cpsense":"data-ad-client=ca-pub-9717542802261829","827-behappy":"data-ad-client=ca-pub-9717542802261829","827-91games":"data-ad-client=ca-pub-9717542802261829","827-marketjs":"data-ad-client=ca-pub-9717542802261829","827-cpsense":"data-ad-client=ca-pub-9717542802261829","741-behappy":"data-ad-client=ca-pub-9717542802261829","741-91games":"data-ad-client=ca-pub-9717542802261829","741-marketjs":"data-ad-client=ca-pub-9717542802261829","741-cpsense":"data-ad-client=ca-pub-9717542802261829","788-behappy":"data-ad-client=ca-pub-9717542802261829","788-91games":"data-ad-client=ca-pub-9717542802261829","788-marketjs":"data-ad-client=ca-pub-9717542802261829","788-cpsense":"data-ad-client=ca-pub-9717542802261829","843-behappy":"data-ad-client=ca-pub-9717542802261829","843-91games":"data-ad-client=ca-pub-9717542802261829","843-marketjs":"data-ad-client=ca-pub-9717542802261829","843-cpsense":"data-ad-client=ca-pub-9717542802261829","786-behappy":"data-ad-client=ca-pub-9717542802261829","786-91games":"data-ad-client=ca-pub-9717542802261829","786-marketjs":"data-ad-client=ca-pub-9717542802261829","786-cpsense":"data-ad-client=ca-pub-9717542802261829","458-behappy":"data-ad-client=ca-pub-9717542802261829","458-91games":"data-ad-client=ca-pub-9717542802261829","458-marketjs":"data-ad-client=ca-pub-9717542802261829","458-cpsense":"data-ad-client=ca-pub-9717542802261829","371-behappy":"data-ad-client=ca-pub-9717542802261829","371-91games":"data-ad-client=ca-pub-9717542802261829","371-cpsense":"data-ad-client=ca-pub-9717542802261829","371-marketjs":"data-ad-client=ca-pub-9717542802261829","3936-marketjs":"data-ad-client=ca-pub-5985150674191762","3936-behappy":"data-ad-client=ca-pub-5985150674191762","3936-91games":"data-ad-client=ca-pub-5985150674191762","3936-cpsense":"data-ad-client=ca-pub-5985150674191762","3936-cpsense-cd":"data-ad-client=ca-pub-5985150674191762","3937-marketjs":"data-ad-client=ca-pub-9973079271836529","3937-behappy":"data-ad-client=ca-pub-9973079271836529","3937-91games":"data-ad-client=ca-pub-9973079271836529","3937-cpsense":"data-ad-client=ca-pub-9973079271836529","3937-cpsense-cd":"data-ad-client=ca-pub-9973079271836529","3938-marketjs":"data-ad-client=ca-pub-9973079271836529","3938-behappy":"data-ad-client=ca-pub-9973079271836529","3938-91games":"data-ad-client=ca-pub-9973079271836529","3938-cpsense":"data-ad-client=ca-pub-9973079271836529","3938-cpsense-cd":"data-ad-client=ca-pub-9973079271836529","1323-marketjs":"data-ad-client=ca-pub-5985150674191762","1323-behappy":"data-ad-client=ca-pub-5985150674191762","1323-91games":"data-ad-client=ca-pub-5985150674191762","1323-cpsense":"data-ad-client=ca-pub-5985150674191762","1323-cpsense-cd":"data-ad-client=ca-pub-5985150674191762","193-marketjs":"/91325758/h5-bwg-game/reward-game-ads","193-behappy":"/91325758/h5-bwg-game/reward-game-ads","193-91games":"/91325758/h5-bwg-game/reward-game-ads","193-cpsense":"/91325758/h5-bwg-game/reward-game-ads","193-cpsense-cd":"/91325758/h5-bwg-game/reward-game-ads","3942-marketjs":"data-ad-client=ca-pub-4230754353315567","3942-behappy":"data-ad-client=ca-pub-4230754353315567","3942-91games":"data-ad-client=ca-pub-4230754353315567","3942-cpsense":"data-ad-client=ca-pub-4230754353315567","3942-cpsense-cd":"data-ad-client=ca-pub-4230754353315567","3917-marketjs":"0","3553-marketjs":"data-ad-client=ca-pub-8934204454340791","3553-behappy":"data-ad-client=ca-pub-8934204454340791","3553-91games":"data-ad-client=ca-pub-8934204454340791","3553-cpsense":"data-ad-client=ca-pub-8934204454340791","3553-cpsense-cd":"data-ad-client=ca-pub-8934204454340791","3884-behappy":"https://pubads.g.doubleclick.net/gampad/ads?iu=/23269691274/h5-play.6xfun.com/play.6xfun.com-reward-070801&description_url=http%3A%2F%2F6xfun.com&tfcd=0&npa=0&sz=300x250%7C400x300%7C640x480&gdfp_req=1&unviewed_position_start=1&vpos=preroll&output=vast&env=vp&impl=s&correlator=","3884-91games":"https://pubads.g.doubleclick.net/gampad/ads?iu=/23269691274/h5-play.6xfun.com/play.6xfun.com-reward-070801&description_url=http%3A%2F%2F6xfun.com&tfcd=0&npa=0&sz=300x250%7C400x300%7C640x480&gdfp_req=1&unviewed_position_start=1&vpos=preroll&output=vast&env=vp&impl=s&correlator=","3884-cpsense":"https://pubads.g.doubleclick.net/gampad/ads?iu=/23269691274/h5-play.6xfun.com/play.6xfun.com-reward-070801&description_url=http%3A%2F%2F6xfun.com&tfcd=0&npa=0&sz=300x250%7C400x300%7C640x480&gdfp_req=1&unviewed_position_start=1&vpos=preroll&output=vast&env=vp&impl=s&correlator=","3884-cpsense-cd":"https://pubads.g.doubleclick.net/gampad/ads?iu=/23269691274/h5-play.6xfun.com/play.6xfun.com-reward-070801&description_url=http%3A%2F%2F6xfun.com&tfcd=0&npa=0&sz=300x250%7C400x300%7C640x480&gdfp_req=1&unviewed_position_start=1&vpos=preroll&output=vast&env=vp&impl=s&correlator=","3884-marketjs":"https://pubads.g.doubleclick.net/gampad/ads?iu=/23269691274/h5-play.6xfun.com/play.6xfun.com-reward-070801&description_url=http%3A%2F%2F6xfun.com&tfcd=0&npa=0&sz=300x250%7C400x300%7C640x480&gdfp_req=1&unviewed_position_start=1&vpos=preroll&output=vast&env=vp&impl=s&correlator=","4073-marketjs":"/68700844/nor0308/Incentive-01-nor0308","4073-behappy":"/68700844/nor0308/Incentive-01-nor0308","4073-91games":"/68700844/nor0308/Incentive-01-nor0308","4073-cpsense":"/68700844/nor0308/Incentive-01-nor0308","4073-cpsense-cd":"/68700844/nor0308/Incentive-01-nor0308","3887-marketjs":"https://pubads.g.doubleclick.net/gampad/ads?iu=/23269691274/h5-game.6xfun.com/game.6xfun.com-reward-071401&description_url=http%3A%2F%2F6xfun.com&tfcd=0&npa=0&sz=300x250%7C400x300%7C640x480&gdfp_req=1&unviewed_position_start=1&vpos=preroll&output=vast&env=vp&impl=s&correlator=","3887-behappy":"https://pubads.g.doubleclick.net/gampad/ads?iu=/23269691274/h5-game.6xfun.com/game.6xfun.com-reward-071401&description_url=http%3A%2F%2F6xfun.com&tfcd=0&npa=0&sz=300x250%7C400x300%7C640x480&gdfp_req=1&unviewed_position_start=1&vpos=preroll&output=vast&env=vp&impl=s&correlator=","3887-91games":"https://pubads.g.doubleclick.net/gampad/ads?iu=/23269691274/h5-game.6xfun.com/game.6xfun.com-reward-071401&description_url=http%3A%2F%2F6xfun.com&tfcd=0&npa=0&sz=300x250%7C400x300%7C640x480&gdfp_req=1&unviewed_position_start=1&vpos=preroll&output=vast&env=vp&impl=s&correlator=","3887-cpsense":"https://pubads.g.doubleclick.net/gampad/ads?iu=/23269691274/h5-game.6xfun.com/game.6xfun.com-reward-071401&description_url=http%3A%2F%2F6xfun.com&tfcd=0&npa=0&sz=300x250%7C400x300%7C640x480&gdfp_req=1&unviewed_position_start=1&vpos=preroll&output=vast&env=vp&impl=s&correlator=","3887-cpsense-cd":"https://pubads.g.doubleclick.net/gampad/ads?iu=/23269691274/h5-game.6xfun.com/game.6xfun.com-reward-071401&description_url=http%3A%2F%2F6xfun.com&tfcd=0&npa=0&sz=300x250%7C400x300%7C640x480&gdfp_req=1&unviewed_position_start=1&vpos=preroll&output=vast&env=vp&impl=s&correlator=","3890-marketjs":"https://pubads.g.doubleclick.net/gampad/ads?iu=/23269691274/h5-hi.6xfun.com/hi.6xfun.com-reward-071401&description_url=http%3A%2F%2F6xfun.com&tfcd=0&npa=0&sz=300x250%7C400x300%7C640x480&gdfp_req=1&unviewed_position_start=1&vpos=preroll&output=vast&env=vp&impl=s&correlator=","3890-behappy":"https://pubads.g.doubleclick.net/gampad/ads?iu=/23269691274/h5-hi.6xfun.com/hi.6xfun.com-reward-071401&description_url=http%3A%2F%2F6xfun.com&tfcd=0&npa=0&sz=300x250%7C400x300%7C640x480&gdfp_req=1&unviewed_position_start=1&vpos=preroll&output=vast&env=vp&impl=s&correlator=","3890-91games":"https://pubads.g.doubleclick.net/gampad/ads?iu=/23269691274/h5-hi.6xfun.com/hi.6xfun.com-reward-071401&description_url=http%3A%2F%2F6xfun.com&tfcd=0&npa=0&sz=300x250%7C400x300%7C640x480&gdfp_req=1&unviewed_position_start=1&vpos=preroll&output=vast&env=vp&impl=s&correlator=","3890-cpsense":"https://pubads.g.doubleclick.net/gampad/ads?iu=/23269691274/h5-hi.6xfun.com/hi.6xfun.com-reward-071401&description_url=http%3A%2F%2F6xfun.com&tfcd=0&npa=0&sz=300x250%7C400x300%7C640x480&gdfp_req=1&unviewed_position_start=1&vpos=preroll&output=vast&env=vp&impl=s&correlator=","3890-cpsense-cd":"https://pubads.g.doubleclick.net/gampad/ads?iu=/23269691274/h5-hi.6xfun.com/hi.6xfun.com-reward-071401&description_url=http%3A%2F%2F6xfun.com&tfcd=0&npa=0&sz=300x250%7C400x300%7C640x480&gdfp_req=1&unviewed_position_start=1&vpos=preroll&output=vast&env=vp&impl=s&correlator=",marketjs:"data-ad-client=ca-pub-4230754353315567,data-ad-channel=7942679940",behappy:"data-ad-client=ca-pub-4230754353315567,data-ad-channel=1678988102","91games":"data-ad-client=ca-pub-4230754353315567,data-ad-channel=1916701377",cpsense:"data-ad-client=ca-pub-4230754353315567,data-ad-channel=9810653203","cpsense-cd":"data-ad-client=ca-pub-4230754353315567,data-ad-channel=5196620779",default_ads:"data-ad-client=ca-pub-4230754353315567,data-ad-channel=3969174711"};